<section>
	<header>
		<st-heading title="{{'_POLICY_HEADER_TITLE_MAIN_' | translate}}" subtitle="{{'_INPUT_HEADER_TITLE_SECONDARY' | translate}}:"></st-heading>
	</header>

	<div class="c-row c-msg c-msg--small c-msg--error c-msg--bottom-margin" data-ng-if="policies.error" data-qa="manage-policies-error-msg">
    	<i class="c-icon icon-circle-cross"></i>
    	<span translate="{{policies.errorMessage}}"></span>
  	</div>

	<div class="c-panel" data-ng-if="policies.policiesData.list.length > 0">
		<table class="c-table c-table--full-width">
			<thead class="c-table__thead">
			  	<tr>
			    	<th class="c-table__td c-col--3">{{"_NAME_" | translate}}</th>
      				<th class="c-table__td">{{"_DESCRIPTION_" | translate}}</th>
      				<th class="c-table__td c-col--1"></th>
      				<th class="c-table__td c-col--1"></th>
				</tr>
			</thead>
			<tbody>
				<tr class="c-table__tr" data-ng-repeat="policyData in policies.policiesData.list">
					<td class="c-table__td c-table__td--no-wrap c-col--3">{{policyData.policy.name}}</td>
					<td class="c-table__td">{{policyData.policy.description}}</td>
					<td class="c-table__td c-col--1 c-table__td--to-right">{{policyData.status}}</td>
					<td class="c-table__td c-table__td--no-wrap c-table__td--to-right c-col--1">
						<i class="c-icon c-icon--is-clickable c-icon--call-to-action icon-actions" data-ng-click="$root.stToggleFloatingMenu[policyData.policy.id]()" data-qa="input-context-menu-{{policyData.policy.id}}">
							<st-floating-menu toggle-id="{{policyData.policy.id}}" align="right">
								<st-menu-element class-icon="icon-cross" data-ng-click="policies.deletePolicy(policyData.policy.id, $index)" data-qa="policy-context-menu-{{policyData.policy.id}}-delete">
									{{"_INPUT_ACTIONS_MENU_DELETE_" | translate}}
								</st-menu-element>
								<st-menu-element class-icon="icon-play" data-ng-click="policies.runPolicy(policyData.policy.id)" data-qa="policy-context-menu-{{policyData.policy.id}}-run">
									{{"_OUTPUT_ACTIONS_MENU_RUN_" | translate}}
								</st-menu-element>
								<st-menu-element class-icon="icon-download" data-href="/policy/find/{{policyData.policy.id}}" data-download-file-name="{{policyData.policy.name}}.json" data-qa="policy-context-menu-{{policyData.policy.id}}-download">
									{{"_OUTPUT_ACTIONS_MENU_DOWNLOAD_" | translate}}
								</st-menu-element>
							</st-floating-menu>
						</i>
					</td>
				</tr>
			</tbody>
		</table>
    </div>

    <div class="c-panel c-panel--framed" data-ng-if="policies.policiesData.list.length === 0" ui-sref="dashboard.newPolicy" data-qa="policy-first-message">
        <i class="icon-marquee-plus"></i>
        <span>{{"_POLICY_CREATE_FIRST_ONE_" | translate}}</span>
    </div>

    <footer class="c-row c-row--separated c-row--to-right c-row--footer">
    	<c-route-button button-class="'c-button c-button--call-to-action-1'" route="'dashboard.newPolicy'" text="'_INPUT_BUTTON_NEW_' | translate" data-qa="policies-new-button"></c-route-button>
    </footer>
</section>
