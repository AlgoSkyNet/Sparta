<header class="c-step-content__title c-step-content__title--underlined">
  <h1>
    <span class="c-step-counter">{{wizard.currentStep + 1}}/{{wizard.steps.length}}</span>
    <i class="c-step-counter__icon c-icon c-icon--small icon-arrow2_right"></i>
    <span class="c-step-content__title-text">{{"_POLICY_._STEPS_._MODEL_" | translate}}</span>
  </h1>
</header>
<div data-ng-controller="PolicyModelsCtrl as vm">
  <accordion>
    <accordion-group  is-open="vm.accordionStatus[$index]" ng-repeat="currentModel in vm.policy.models track by $index" ng-model="currentModel">

      <accordion-heading>
        <label>{{$index + 1}}</label>. <p>{{currentModel.type}}</p>

        <i class="pull-right glyphicon"
           ng-class="{'glyphicon-chevron-down': vm.isCurrentModel($index), 'glyphicon-chevron-right': !vm.isCurrentModel($index)}"></i>



      </accordion-heading>
      <button ng-click="vm.removeModel($index, $event)"><i class="icon-cross"></i></button>
      <ng-include src="'views/policies/new-model.html'"></ng-include>
    </accordion-group>

    <accordion-group is-open="vm.accordionStatus[vm.policy.models.length]" ng-model="vm.newModel">
      <accordion-heading>
        <label>{{(vm.policy.models.length + 1) }}</label>. <p>{{"_POLICY_._MODEL_NAME_" | translate}}</p>

        <i class="pull-right glyphicon"
           ng-class="{'glyphicon-chevron-down': vm.isCurrentModel(0), 'glyphicon-chevron-right': !vm.isCurrentModel($index)}"></i>
      </accordion-heading>

      <ng-include src="'views/policies/new-model.html'">
      </ng-include>
    </accordion-group>
  </accordion>
</div>
