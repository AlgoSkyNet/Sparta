<section>
  <header class="c-step-content__title c-step-content__title--underlined">
    <h1>
      <span class="c-step-counter">{{wizard.currentStep + 1}}/{{wizard.steps.length}}</span>
      <i class="c-step-counter__icon c-icon c-icon--small icon-arrow2_right"></i>
      <span class="c-step-content__title-text">{{"_POLICY_._STEPS_._MODEL_" | translate}}</span>
    </h1>
  </header>
  <p class="c-info-text c-info-text--narrow"><i class="c-icon c-info-text__icon icon-info1"></i><span
    class="c-info-text__text">{{"_POLICY_._MODEL_INTRO_" | translate}}</span></p>

  <div data-ng-controller="PolicyModelsCtrl as vm">
    <accordion close-others="true">
      <accordion-group is-open=vm.accordionStatus.items[$index] ng-repeat="currentModel in vm.policy.models track by $index"
                       ng-model="currentModel">

        <accordion-heading>
          <label>{{$index + 1}}</label>. <p>{{currentModel.type}}</p>

          <i class="pull-right glyphicon"
             ng-class="{'icon-arrow2_down':   vm.accordionStatus.items[$index], 'icon-arrow2_right': ! vm.accordionStatus.items[$index]}"></i>
        </accordion-heading>
        <button ng-click="vm.removeModel($index, $event)"><i class="icon-cross"></i></button>
        <ng-include src="'views/policies/model-panel.html'" ng-init = "model = currentModel"></ng-include>
      </accordion-group>

      <accordion-group is-open = vm.accordionStatus.newItem ng-model="vm.newModel">
        <accordion-heading>
          <label>{{(vm.policy.models.length + 1) }}</label>. <p>{{"_POLICY_._MODEL_NAME_" | translate}}</p>

          <i class="pull-right glyphicon"
             ng-class="{'icon-arrow2_down':  vm.accordionStatus.newItem, 'icon-arrow2_right': !vm.accordionStatus.newItem}"></i>
        </accordion-heading>

        <ng-include src="'views/policies/model-panel.html'" ng-init = "model = vm.newModel">

        </ng-include>

        <div class="c-col c-col--12 c-col--vertical-centered c-col--to-right">
          <button class="c-button" ng-click="vm.addModel()">
            <span>{{"_POLICY_._ADD_MODEL_" | translate}}</span>
          </button>
        </div>

      </accordion-group>
    </accordion>
  </div>
  <footer class="c-row c-row--footer c-row--separated">
    <div class="c-col c-col--6 c-col--vertical-centered">
      <c-icon-link icon-class="'c-icon c-icon--is-clickable c-icon--call-to-action icon-help1'"
                   text="'_INPUT_WINDOW_NEW_HELP_' | translate" text-class="" link-url="vm.helpLink"></c-icon-link>
    </div><!--
 --><div class="c-col c-col--6 c-col--vertical-centered c-col--to-right">
      <button class="c-button c-button--call-to-action-1" data-ng-click="vm.nextStep()">
        <i class="icon icon-arrow-right"></i>
        <span>{{"_CONTINUE_" | translate}}</span>
      </button>
    </div>

  </footer>
</section>
